@using ConfluencePOC.Web.Enums
@using ConfluencePOC.Web.Models.Contentful
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model ConfluencePOC.Web.Models.Contentful.Grid

@{
    switch (Model.GridType)
    {
        case GridType.Cards:
            <div class="@Model.CssClass">
                <section class="dfe-section govuk-!-margin-top-5">
                    <div class="govuk-width-container">
                        @if (Model.ShowTitle)
                        {
                            <h2 class="govuk-heading-l" id="@TagBuilder.CreateSanitizedId(Model.Title, "-")">@Model.Title</h2>
                        }
                        @if (Model.Content != null && Model.Content.Any())
                        {
                            <div class="dfe-grid-container dfe-grid-container--wider govuk-!-margin-top-5">
                                @foreach (var content in Model.Content)
                                {
                                    var card = (Card)content;
                                    <partial model="@card" name="Grid/Card"/>
                                }
                            </div>
                        }
                    </div>
                </section>
            </div>
            break;

        case GridType.AlternatingImageAndText:
            <div class="@Model.CssClass">
                @if (Model.ShowTitle)
                {
                    <h2 class="govuk-heading-l" id="@TagBuilder.CreateSanitizedId(Model.Title, "-")">@Model.Title</h2>
                }


                @if (Model.Content != null)
                {
                    int position = -1;
                    foreach (var content in Model.Content)
                    {
                        position++;
                        var card = (Card)content;
                        card.Position = position;
                        <partial model="@card" name="Grid/AlternatingImageAndText"/>
                    }
                }
            </div>
            break;
            
        case GridType.ExternalLinks:
            @if (Model.ShowTitle)
            {
                <h2 class="govuk-heading-l" id="@TagBuilder.CreateSanitizedId(Model.Title, "-")">@Model.Title</h2>
            }
            @if (Model.Content != null)
            {
                @foreach (var content in Model.Content)
                {
                    var externalAgency = (ExternalAgency)content;
                    <partial model="@externalAgency" name="Grid/ExternalAgency"/>
                }
            }
            break;
    }
}
